<!DOCTYPE html>
<html>
<head><meta charset="utf-8">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.10/css/select2.css" rel="stylesheet" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.10/js/select2.min.js"></script>

<script>        
function getalbums()
{
artist = $("#artists option:selected").text();
$.ajax({
    url: "{{ host }}/get_collection_albums_json",
    data:{
        artist : $("#artists option:selected").text()
    },
    dataType: "json",
    type: "GET",
    async: true,
    success: function (data) {
        console.log(data);
        var options = "<option>All Albums</option>";
        $.each(data, function (key, value) {
            options += '<option>' + value + '</option>';
        });
        $('#albums option').remove();
        $('#albums').append(options);
    },
    error(jqXHR, textStatus, errorThrown) {
        alert('Something wrong happened because: ' + errorThrown)
    }
});
}
function getqueue()
{
queue= $("#queue option:selected").text();
$.ajax({
    url: "{{ host }}/get_queue_json",
    dataType: "json",
    type: "GET",
    async: true,
    success: function (data) {
        console.log(data);
        var options = "<option>Current Queue</option>";
        $.each(data, function (key, value) {
            options += '<option>' + value + '</option>';
        });
        $('#queue option').remove();
        $('#queue').append(options);
    },
    error(jqXHR, textStatus, errorThrown) {
        alert('Something wrong happened because: ' + errorThrown)
    }
});
}

function getartists()
{
$.ajax({
    url: "{{ host }}/get_collection_artists_json",
    dataType: "json",
    type: "GET",
    async: true,
    success: function (data) {
        console.log(data);
        var options = "<option>All Artists</option>";
        $.each(data, function (key, value) {
            options += '<option>' + value + '</option>';
        });
        $('#artists option').remove();
        $('#artists').append(options);
    },
    error(jqXHR, textStatus, errorThrown) {
        alert('Something wrong happened because: ' + errorThrown)
    }
});
}

function getstations()
{
$.ajax({
    url: "{{ host }}/get_stations_json",
    dataType: "json",
    type: "GET",
    async: true,
    success: function (data) {
        console.log(data);
        var options = "";
        $.each(data, function (key, value) {
            options += '<option>' + value + '</option>';
        });
        $('#stations option').remove();
        $('#stations').append(options);
    },
    error(jqXHR, textStatus, errorThrown) {
        alert('Something wrong happened because: ' + errorThrown)
    }
});
}

$(document).ready(function(){
$('#artists').select2();
$('#albums').select2();
$('#stations').select2();
$('#queue').select2();
getartists();
getalbums();
getstations();
$("#artists").change(getalbums);

$("#RefreshQueue").click(function()
{
    getqueue()
})

$("#MLAppendToQueue").click(function()
{
    $.ajax({
        type: "GET",
        url: "{{ host }}/append_to_track_queue",
        data:{
            artist : $("#artists option:selected").text(),
            album : $("#albums option:selected").text()
        },
        success: function (data) {
            alert(data);
        }
    });
})

$("#STAppendToQueue").click(function()
{
    $.ajax({
        type: "GET",
        url: "{{ host }}/append_to_track_queue",
        data:{
            station : $("#stations option:selected").text()
        },
        success: function (data) {
            alert(data);
        }
    });
})

$("#ShuffleQueue").click(function()
{
    $.ajax({
        type: "GET",
        url: "{{ host }}/shuffle_queue",
        success: function (data) {
            alert(data);
        },
        error(jqXHR, textStatus, errorThrown) {
            alert('Something wrong happened because: ' + errorThrown)
        }
        });
})
$("#ClearQueue").click(function()
{
    $.ajax({
        type: "GET",
        url: "{{ host }}/clear_queue",
        success: function (data) {
            alert(data);
        },
        error(jqXHR, textStatus, errorThrown) {
            alert('Something wrong happened because: ' + errorThrown)
        }
        });
})

});
</script>
</head>
<body>
<p>Music Library</p>
<select style="width: 400px" id="artists"></select><br>
<select style="width: 400px" id="albums"></select><br>
<input type="button" id="MLAppendToQueue" value="Append to Queue">
<p>Stations</p>
<p><select style="width: 400px" id="stations"></select></p>
<input type="button" id="STAppendToQueue" value="Append to Queue">
<p>Queue</p>
<p>
    <select style="width: 400px" id="queue"></select><input type="button" id="RefreshQueue" value="Refresh">
    <p><input type="button" id="ShuffleQueue" value="Shuffle"><input type="button" id="ClearQueue" value="Clear"></p>
    
</p>
</body>
</html>
